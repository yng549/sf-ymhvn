public  without sharing class OutputFormPDFController {
    private final static String MSG_EXCEPTION = 'Error System, Please Connect Admin.';
    private final static String DATE_TIME_FILE_FORMAT = 'yyyyMMddHHmm';
    // private final static String FILE_NAME = '{0}{1}-{2}-{3}-{4}.pdf';
    private final static String FILE_NAME = '{0} - {1}.pdf';
    public string logo {get;set;}
    private class CustomException extends Exception {
    }
    public X3_Inventory_Transaction_Header__c objHeader { get; set; }
    public String strRecordId { get; set; }
    public List<Inventory_Transaction_Item__c> lstItems { get; set; }
    public Map<Id, PricebookEntry> mapPriceBookEntry { get; set; }
  
    public OutputFormPDFController() {
      // try {
      mapPriceBookEntry = new Map<Id, PricebookEntry>();
      objHeader = new X3_Inventory_Transaction_Header__c();
      strRecordId = ApexPages.currentPage().getParameters().get('Id');
      if (String.isNotBlank(strRecordId)) {
        objHeader = getHeaderById(strRecordId);
        if (String.isBlank(objHeader.Id)) {
          return;
        }
        lstItems = getLstItems(objHeader.Id);
        Set<Id> setProduct = new Set<Id>();
        for (Inventory_Transaction_Item__c Item : lstItems) {
          setProduct.add(item.Product__c);
        }
        for (PricebookEntry PbE : getLstPriceBookEntry(setProduct)) {
          mapPriceBookEntry.put(PbE.Product2Id, PbE);
        }
        logo = '';
         if (objHeader.From_Warehouse_Location__r.Account__r.Name != null) {
            String doDlCreateName = objHeader.From_Warehouse_Location__r.Account__r.Name;
            if (doDlCreateName == 'REVZONE YAMAHA MOTOR HA NOI') {
                logo = 'logoRevzoneYamahaMotorHN';
            } else {
                logo = 'logoRevzoneYamahaMotorSG';
            }
        }  
      }
      // } catch (Exception ex) {
      //   throw new CustomException(
      //     String.format(MSG_EXCEPTION, new List<Object>{ ex.getMessage() })
      //   );
      // }
    }
  
    private static X3_Inventory_Transaction_Header__c getHeaderById(
      String recordId
    ) {
      List<X3_Inventory_Transaction_Header__c> lstHeader = [
        SELECT
          Id,
          Name,
          StockDate__c,
          Header_Number__c,
          Order_No__c,
          Contract_No__c,
          Document_Number__c,
          From_Warehouse_Location__c,
          From_Warehouse_Location__r.Name,
          From_Warehouse_Location__r.Account__r.Name,
          To_Warehouse_Location__c,
          To_Warehouse_Location__r.Name,
          Comment_Message__c,
          Order_Reserved__c,
          Order_Reserved__r.AccountId,
          Order_Reserved__r.Account.PersonMobilePhone,
          Order_Reserved__r.Account.Name,
          Order_Reserved__r.Account.Address_Full__c,
          Order_Reserved__r.Account.DO_DL_Create_Account__r.Name
        FROM X3_Inventory_Transaction_Header__c
        WHERE Id = :recordId
      ];
      if (lstHeader.isEmpty()) {
        return new X3_Inventory_Transaction_Header__c();
      } else {
        return lstHeader[0];
      }
    }
  
    private static List<Inventory_Transaction_Item__c> getLstItems(
      String headerId
    ) {
      List<Inventory_Transaction_Item__c> lstItems = new List<Inventory_Transaction_Item__c>();
      lstItems = [
        SELECT Id, Quantity__c, Note__c, Unit_Price__c,VAT__c,Product__c,Product__r.Name,Product__r.ProductCode,Product__r.Product_Unit__c,Product__r.VAT__c,Product__r.PartsNameEng__c
        FROM Inventory_Transaction_Item__c
        WHERE Inventory_Transaction_Header__c = :headerId
      ];
      return lstItems;
    }
  
    private static List<PricebookEntry> getLstPriceBookEntry(Set<Id> setProduct) {
      List<PricebookEntry> lstItems = new List<PricebookEntry>();
      lstItems = [
        SELECT
          Id,
          UnitPrice,
          Product2Id,
          Product2.ProductCode,
          Product2.Name,
          Product2.PartsNameEng__c,
          Product2.Product_Unit__c,
          Product2.VAT__c
        FROM PricebookEntry
        WHERE
          IsActive = TRUE
          AND (Pricebook2.Type__c = 'PCAService' OR Pricebook2.Type__c = 'Bike')
          AND Product2Id IN :setProduct
      ];
      return lstItems;
    }
    public static void cheatTemp() {
      String a = 'cheat';
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
      a = a;
    }
}